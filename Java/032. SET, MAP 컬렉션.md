# SET, MAP 컬렉션

---

## 1. Set 컬렉션

- List는 저장 순서를 유지하지만, Set은 순서를 유지하지 않음.
- Set은 중복된 객체를 저장할 수 없음.
- null은 하나만 저장 가능.
- 수학의 집합처럼 순서 없음, 중복 없음의 특징을 가짐.
- 비유: 구슬 주머니 → 같은 구슬을 두 번 넣을 수 없고, 꺼내는 순서도 일정하지 않음.
- 주요 구현 클래스: HashSet, LinkedHashSet, TreeSet
- 공통적으로 Set 인터페이스를 구현하며, 인덱스로 객체를 접근할 수 있는 메소드는 제공하지 않음.

---

## 2. 공통 메서드

| 기능     | 메소드                         | 설명 |
|----------|-------------------------------|------|
| 객체 추가 | boolean add(E e)              | 객체를 저장, 중복이면 false |
| 객체 검색 | boolean contains(Object o)    | 저장 여부 확인 |
| 객체 검색 | boolean isEmpty( )            | 비어 있는지 확인 |
| 객체 검색 | Iterator<E> iterator( )       | 반복자 리턴 |
| 객체 검색 | int size( )                   | 저장된 객체 수 |
| 객체 삭제 | void clear( )                 | 모든 객체 삭제 |
| 객체 삭제 | boolean remove(Object o)      | 특정 객체 삭제 |

- 제네릭 타입 E는 구현 객체 생성 시 구체적인 타입으로 결정

```java
Set<String> set = ...; 
// 객체 추가
set.add("홍길동"); 
set.add("신용권"); 
// 객체 삭제
set.remove("홍길동");
```
- Set 컬렉션은 인덱스로 객체를 가져올 수 없고, 대신 iterator()로 반복자를 얻어 전체를 순회
```java
Set<String> set = ...;
Iterator<String> iterator = set.iterator();
Iterator 인터페이스 메소드:
```
| 리턴 타입 메소드     | 설명                    |
|----------------------|-------------------------|
| boolean hasNext()    | 다음 객체가 있으면 true |
| E next()             | 객체 하나를 가져옴      |
| void remove()        | 현재 객체 제거          |

- 객체를 반복해서 가져오는 코드:
```java
Set<String> set = ...; 
Iterator<String> iterator = set.iterator();
while(iterator.hasNext()) { 
    String str = iterator.next(); 
}
```
- 향상된 for문을 사용해도 된다:
```java
Set<String> set = ...; 
for(String str : set) { 
    // 처리
}
```
- Iterator로 객체를 삭제하는 코드
```java
while(iterator.hasNext()) { 
    String str = iterator.next(); 
    if(str.equals("홍길동")) { 
        iterator.remove(); 
    } 
}
```
---

## 3. HashSet

- HashSet은 Set 인터페이스의 구현 클래스
- 생성 방법은 다음과 같다.
```java
Set<E> set = new HashSet<E>();
Set<String> set = new HashSet<String>();
```
- HashSet은 순서를 유지하지 않고 중복 저장하지 않음
- 객체 저장 전 hashCode()로 해시코드를 얻고, 기존 객체들과 비교 후 동일한 해시코드가 있으면 equals()로 재확인하여 true면 저장하지 않음

---

## 4. Map 컬렉션

- Map은 키(key)와 값(value)의 쌍(Entry)으로 데이터를 저장하는 컬렉션
- 키와 값 모두 객체이며, 키는 중복 불가, 값은 중복 허용.
- 동일한 키로 값을 저장하면 기존 값이 새로운 값으로 대체됨.
- 대표 구현 클래스: HashMap, Hashtable, LinkedHashMap, Properties, TreeMap.

### Map 인터페이스 주요 특징

- 키를 기준으로 객체 관리.
- 대부분의 메서드가 키를 매개값으로 사용.

| 기능       | 메소드                                | 설명 |
|------------|----------------------------------------|------|
| 객체 추가  | V put(K key, V value)                 | 주어진 키로 값을 저장, 새로운 키일 경우 null, 동일한 키가 있을 경우 값을 대체하고 이전 값을 리턴 |
| 객체 검색  | boolean containsKey(Object key)       | 주어진 키가 있는지 여부 |
| 객체 검색  | boolean containsValue(Object value)   | 주어진 값이 있는지 여부 |
| 객체 검색  | Set<Map.Entry<K, V>> entrySet( )      | 키와 값의 쌍으로 구성된 모든 Map.Entry 객체를 Set에 담아서 리턴 |
| 객체 검색  | V get(Object key)                     | 주어진 키가 있는 값을 리턴 |
| 객체 검색  | boolean isEmpty( )                    | 컬렉션이 비어 있는지 여부 |
| 객체 검색  | Set<K> keySet( )                      | 모든 키를 Set 객체에 담아서 리턴 |
| 객체 검색  | int size( )                           | 저장된 키의 총 수를 리턴 |
| 객체 검색  | Collection<V> values( )               | 저장된 모든 값을 Collection에 담아서 리턴 |
| 객체 삭제  | void clear( )                         | 모든 Map.Entry(키와 값)를 삭제 |
| 객체 삭제  | V remove(Object key)                  | 주어진 키와 일치하는 Map.Entry를 삭제하고 값을 리턴 |

```java
Map<String, Integer> map = ~;
map.put("홍길동", 30);         // 객체 추가
int score = map.get("홍길동"); // 객체 찾기
map.remove("홍길동");         // 객체 삭제
```

### 전체 객체 순회 (keySet() 활용)

```java
Map<K, V> map = ~;
Set<K> keySet = map.keySet();
Iterator<K> keyIterator = keySet.iterator();
while(keyIterator.hasNext()) {
    K key = keyIterator.next();
    V value = map.get(key);
}
```

### 전체 객체 순회 (entrySet() 활용)

```java
Set<Map.Entry<K, V>> entrySet = map.entrySet();
Iterator<Map.Entry<K, V>> entryIterator = entrySet.iterator();
while(entryIterator.hasNext()) {
    Map.Entry<K, V> entry = entryIterator.next();
    K key = entry.getKey();
    V value = entry.getValue();
}
```

---

## 5. HashMap

- HashMap은 Map 인터페이스를 구현한 대표적인 Map 컬렉션
- 키로 사용되는 객체는 `hashCode()`와 `equals()` 메소드를 재정의해야 동등 객체로 인식
```java
// K : 키, V : 값
Map<K, V> map = new HashMap<K, V>();
Map<String, Integer> map = new HashMap<String, Integer>();
```

---

## 6. Hashtable

- Hashtable은 HashMap과 유사하지만, 동기화된 메소드로 구성되어 있어 멀티스레드 환경에 안전(Thread-safe)하다.

```java
Map<K, V> map = new Hashtable<K, V>();
Map<String, Integer> map = new Hashtable<String, Integer>();
```

---

## 7. Properties

- Properties는 Hashtable의 하위 클래스 → 모든 기능 상속
- 차이점:
    - Hashtable: 키와 값에 다양한 타입 허용
    - Properties: 키와 값 모두 String 타입으로 고정
- 주 용도:
    - 애플리케이션 설정 정보
    - DB 연결 정보
    - 다국어 처리(국제화)

---

### 프로퍼티 파일 (.properties)
- 텍스트 파일 형식 → 키=값 구조
- 인코딩: ISO 8859-1
    - 한글은 유니코드(Unicode)로 자동 변환됨 (\uXXXX 형식)
- 변환 도구: native2ascii.exe
  ```bash
  native2ascii.exe 원본.properties 변경.properties
  ```

---

### 예시: database.properties
```properties
driver=oracle.jdbc.OracleDriver
url=jdbc:oracle:thin:@localhost:1521:orcl
username=scott
password=tiger
```

---

### 파일 읽기 방법
```java
Properties props = new Properties();
props.load(new FileReader("경로/database.properties"));
```

- 클래스와 같은 위치의 파일 경로 가져오기:
```java
String path = 클래스명.class.getResource("database.properties").getPath();
path = URLDecoder.decode(path, "utf-8");
props.load(new FileReader(path));
```

- 다른 패키지에 있을 경우:
```java
String path = A.class.getResource("/config/database.properties").getPath();
```

---

### 값 읽기
```java
String value = props.getProperty("key"); // 권장 방식
```
- get()도 가능하지만 Object 타입 반환 → 형변환 필요

---

### 전체 예제
```java
import java.io.FileReader;
import java.net.URLDecoder;
import java.util.Properties;

public class PropertiesExample {
    public static void main(String[] args) throws Exception {
        Properties properties = new Properties();
        String path = PropertiesExample.class
                         .getResource("database.properties")
                         .getPath();
        path = URLDecoder.decode(path, "utf-8");
        properties.load(new FileReader(path));

        String driver = properties.getProperty("driver");
        String url = properties.getProperty("url");
        String username = properties.getProperty("username");
        String password = properties.getProperty("password");

        System.out.println("driver : " + driver);
        System.out.println("url : " + url);
        System.out.println("username : " + username);
        System.out.println("password : " + password);
    }
}
```


### 참고자료

[이것이 자바다](https://search.shopping.naver.com/book/catalog/32473359191?query=%EC%9D%B4%EA%B2%83%EC%9D%B4%20%EC%9E%90%EB%B0%94%EB%8B%A4&NaPm=ct%3Dm7ne3c9k%7Cci%3D6356ea398110d474e244102192a893d910277fb2%7Ctr%3Dboksl%7Csn%3D95694%7Chk%3Da51fed5127109d9f5a3bd6af6be4725cd7500518)