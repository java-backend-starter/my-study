# DNS 역할과 작동 원리

---

## 1. DNS란?

- DNS(Domain Name System)는 도메인 이름(예: www.example.com)을 IP 주소(예: 192.168.1.0)로 변환하거나 그 반대의 역할을 수행하는 시스템이다.
- 이는 사람이 기억하기 쉬운 도메인 이름을 컴퓨터가 이해할 수 있는 IP 주소로 변환하여 웹사이트에 접근할 수 있도록 도와준다.

---

## 2. DNS 서버 종류

### 기지국 DNS 서버 (로컬 DNS)

- 사용자가 도메인 이름(naver.com 등)을 입력했을 때 가장 먼저 질의하는 DNS 서버.
- 인터넷 설치 시 통신사(ISP)별로 기본 제공됨.
- 로컬 캐시를 활용해 빠르게 응답할 수 있음.
- 해당 도메인의 IP가 없으면 루트 DNS 서버로 질의가 넘어감.

### Root DNS 서버

- 모든 DNS의 시작점, 트리 구조의 최상위 노드.
- 도메인 이름이 처음 들어왔을 때 TLD 서버(.com, .net 등)를 알려줌.
- 전 세계적으로 분산된 구조로 운영됨.
- 도메인 정보가 없으면 TLD 서버로 질의 정보를 넘김.
- 예시
```
"나한텐 google.com은 없어. 근데 .com은 아는 주소니까 .com DNS 서버에 물어봐."
```

### TLD DNS 서버 (Top-Level Domain)

- 최상위 도메인(.com, .net, .kr 등)을 관리하는 DNS 서버.
- 국가별 도메인(ccTLD: .kr, .jp 등)과 일반 도메인(gTLD: .com, .net 등)으로 나뉨.
- 루트 DNS로부터 넘겨받은 요청을 적절한 2차 도메인 서버로 넘김.
- 도메인 예시 분류:
  - .biz : 사업
  - .com : 기업/영리 목적
  - .co.kr : 한국 기업용
  - .edu : 미국 교육기관
  - .info : 정보
  - .jobs : 구인구직
  - .name : 개인
  - .net : 네트워크
  - .org : 비영리 단체
- Tip
  - `.io`는 영국령 인도양 지역의 국가코드 도메인이지만, 개발자 커뮤니티 등에서 많이 사용됨.

### Second-level DNS 서버 (2차 도메인)

- TLD 서버에서 넘겨받은 요청을 처리.
- 도메인의 "중간 이름"에 해당 (예: naver.com의 'naver').
- 이 서버는 실제 서비스 도메인의 위치를 알고 있으며, 필요에 따라 서브 도메인으로 넘김.

### Sub DNS 서버 (서브 도메인)

- 최하위 DNS 서버로, 세부 서비스 영역을 구분.
- 예: www.naver.com, mail.naver.com, cafe.naver.com 등
- 서비스별로 분리된 도메인을 관리함.

---

## 3. DNS 동작 원리

사용자가 웹 브라우저에 도메인 이름을 입력하면, 다음과 같은 과정을 거쳐 해당 웹사이트에 접속한다
1. 로컬 DNS 서버 확인  
   - 사용자의 컴퓨터는 먼저 로컬 DNS 서버(보통 인터넷 서비스 제공업체의 DNS 서버)에 해당 도메인의 IP 주소가 저장되어 있는지 확인한다.
2. 캐시 확인  
   - 만약 로컬 DNS 서버에 해당 정보가 없다면, 이전에 접속한 기록이 있는지 캐시를 확인한다.
3. 루트 DNS 서버 문의  
   - 정보가 없을 경우, 루트 DNS 서버에 문의하여 해당 도메인의 최상위 도메인(TLD) 서버 정보를 얻는다.
4. TLD DNS 서버 문의  
   - TLD 서버에 해당 도메인의 권한 있는 DNS 서버(Authoritative DNS Server) 정보를 요청한다.
5. 권한 있는 DNS 서버 문의  
   - 최종적으로 권한 있는 DNS 서버에 해당 도메인의 IP 주소를 요청하여 응답을 받는다.
6. 응답 전달 및 캐싱  
   - 얻은 IP 주소를 로컬 DNS 서버와 사용자의 컴퓨터에 저장하여, 이후 동일한 도메인에 대한 요청 시 빠르게 응답할 수 있도록 한다.

---

## 4. DNS 문자열 구조

- 도메인 이름은 계층적인 구조로 이루어져 있으며, 각 부분은 점(.)으로 구분된다.

## 예시 : www.naver.com

- 이 도메인은 다음과 같이 구성된다:
  - www : 서브도메인 (Subdomain)
  - naver : 2차 도메인 (Second-level domain)
  - com : 최상위 도메인 (Top-level domain, TLD)
- 이러한 구조는 DNS 시스템이 도메인 이름을 해석하고 해당 IP 주소를 찾는 데 사용된다.

---

## 5. DNS 캐시

- DNS 캐시는 도메인 이름과 해당 IP 주소의 매핑 정보를 임시로 저장하여, 동일한 도메인에 대한 반복적인 요청 시 빠르게 응답할 수 있도록 도와준다.
- 캐시의 위치:
1. 브라우저 캐시  
   - 웹 브라우저는 최근에 방문한 도메인의 DNS 정보를 일정 시간 저장한다.
2. 운영 체제 캐시  
   - 운영 체제 수준에서 DNS 정보를 저장하여, 브라우저 외의 애플리케이션에서도 빠른 DNS 해석이 가능하다.
3. 로컬 DNS 서버 캐시  
   - ISP나 조직의 로컬 DNS 서버는 자주 요청되는 도메인의 DNS 정보를 캐시하여 네트워크 전체의 효율성을 높인다.

### 캐시의 유효 기간

- DNS 정보에는 TTL(Time To Live) 값이 설정되어 있으며, 이 시간이 지나면 캐시된 정보는 무효화되고 새로운 DNS 조회가 필요하다.

### 캐시의 장점

- 속도 향상 : 반복적인 DNS 조회를 줄여 웹 페이지 로딩 속도를 개선한다.
- 트래픽 감소 : 외부 DNS 서버에 대한 요청을 줄여 네트워크 트래픽을 감소시킨다.

### 주의사항

- 캐시된 정보가 오래되었거나 변경된 경우, 잘못된 IP 주소로 연결될 수 있다.
- 문제가 발생할 경우 DNS 캐시를 수동으로 삭제하는 것이 필요할 수 있다.

---

### 참고자료

[DNS 역할과 작동 원리](https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-DNS-%EA%B0%9C%EB%85%90-%EB%8F%99%EC%9E%91-%EC%99%84%EB%B2%BD-%EC%9D%B4%ED%95%B4-%E2%98%85-%EC%95%8C%EA%B8%B0-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC)