# XSS vs CSRF

---

## 1. XSS (Cross-site Scripting)
   
- 웹사이트에 악성 스크립트를 삽입해, 사용자 브라우저에서 실행되도록 하는 공격

### 종류

#### Stored XSS (저장형 XSS)
   
- 설명: 가장 일반적인 XSS 공격 유형
- 동작 방식
  - 공격자는 악성 스크립트를 웹 사이트의 게시판이나 방명록 등에 삽입 
  - 다른 사용자가 해당 글을 열람할 때, 삽입된 스크립트가 실행됨 
  - 사용자의 세션 쿠키가 침입자에게 전달됨
- 특징: 스크립트가 웹 서버에 저장되기 때문에 "Stored"라는 이름이 붙음

#### Reflected XSS (반사형 XSS)
   
- 설명: URL 등을 이용해 바로 반사되는 XSS 공격 
- 동작 방식 
  - 공격자는 URL 등의 변수 부분에 악성 스크립트를 삽입 
  - 사용자가 해당 URL을 클릭하면, 웹 서버가 스크립트를 즉시 반사하여 사용자에게 전달 
  - 결과적으로 스크립트가 실행됨
- 특징: 스크립트가 웹 서버에 저장되지 않고 바로 반사되기 때문에 "Reflected"라는 이름이 붙음

### 동작 방식

- 공격자(Pepetrator)가 웹사이트의 입력값 검증 취약점을 찾음 
- 악성 스크립트를 사이트에 삽입 (예: <script>document.cookie</script>)
- 사용자가 해당 웹사이트에 접근 → 삽입된 스크립트 실행 
- 결과: 사용자의 쿠키/세션 등의 민감 정보 탈취 또는 의도치 않은 동작 실행

### 대응 방안

- 중요 정보는 서버에 저장, 쿠키에는 최소한의 정보만 
- 쿠키에 HttpOnly 설정 → JavaScript에서 접근 불가 
- 입력값 필터링 및 이스케이프 처리 (HTML Encoding, URL Encoding 등)
- Content Security Policy (CSP) 설정으로 외부 스크립트 제한

---

## 2. CSRF (Cross-Site Request Forgery)

- 사용자가 의도하지 않은 요청을 인증된 상태에서 보내도록 유도하는 공격

### 동작 방식

- 공격자가 자금 전송 등 민감한 요청을 포함한 링크/스크립트를 만듬 
- 해당 링크를 로그인 상태의 사용자에게 전송 
- 사용자가 링크 클릭 → 브라우저가 쿠키/세션과 함께 요청 전송 
- 서버는 정상적인 요청으로 오인 → 공격 성공 (예: 돈 송금됨)

### 공격 조건

- 사용자가 로그인된 상태여야 함 
- 사용자가 조작된 페이지(링크 등)에 접근

### 대응 방안

- Referer/Origin 검증 → 요청 출처가 신뢰된 도메인인지 확인 
- CSRF Token 사용 → 세션에 난수 저장 후, 요청마다 함께 보내서 검증 
- Security Token (암호화 토큰) → 사용자 요청마다 암호화된 값 포함 
- SameSite 쿠키 속성 설정 (e.g., SameSite=Strict)
- CAPTCHA 적용 → 사용자가 진짜 사람인지 확인

---

## 3. XSS vs CSRF 요약 비교

| 구분       | XSS                                              | CSRF                                                   |
|------------|---------------------------------------------------|---------------------------------------------------------|
| 발생 위치  | 클라이언트 (브라우저)                                 | 서버                                                     |
| 공격 방식  | 악성 스크립트를 삽입하여 클라이언트에서 실행               | 클라이언트를 속여 서버에 악성 요청 전송                   |
| 신뢰 관계  | 사용자가 웹사이트를 신뢰                               | 웹사이트가 사용자를 신뢰                                  |
| 공격 대상  | 사용자 (브라우저, 쿠키 등)                            | 서버 (권한이 필요한 요청 처리)                            |
| 주요 목적  | 세션/쿠키 탈취, 사이트 변조 등                         | 권한 도용, 의도치 않은 서버 요청 실행                     |


---

### 참고자료

[XSS vs CSRF](https://velog.io/@haizel/XSS%EC%99%80CSRF-%EC%B0%A8%EC%9D%B4%EC%A0%90-%EB%B0%8F-%EB%8C%80%EC%9D%91-%EB%B0%A9%EC%95%88)

[XSS의 종류](https://velog.io/@celtic97/XSS-vs-CSRF)