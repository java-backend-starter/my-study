# 캡슐화와 역캡슐화

---

## 0. 개요

- 네트워크에서 캡슐화(Encapsulation)와 역캡슐화(Decapsulation)는 데이터를 송수신할 때 핵심적인 과정을 의미

---

## 1. 캡슐화 (Encapsulation)

- 송신자가 데이터를 보낼 때, 상위 계층에서 하위 계층으로 내려가며 각 계층이 제어 정보를 덧붙여 데이터를 구성하는 과정

### 응용 계층 (Application Layer)

- 사용자 데이터 생성 (예: 웹 요청, 이메일 등)
- 데이터 형태: Data

### 표현 계층 (Presentation Layer)

- 데이터 인코딩, 압축, 암호화 등

### 세션 계층 (Session Layer)

- 세션 생성 및 관리
- TCP/IP 모델에서는 표현 계층과 세션 계층도 응용 계층 하나로 묶여 처리됩니다.

### 전송 계층 (Transport Layer)

- 데이터 세그먼트화(Segmentation)
- 포트 번호 부착
- 신뢰성 보장 (TCP)
- 데이터 형태: Segment 또는 Datagram

### 네트워크 계층 (Network Layer)

- IP 주소 추가
- 라우팅 정보 부여
- 데이터 형태: Packet

### 데이터 링크 계층 (Data Link Layer)

- MAC 주소 부착
- 오류 검출 정보 추가
- 데이터 형태: Frame

### 물리 계층 (Physical Layer)

- 데이터를 0과 1의 비트로 변환하여 전송
- 데이터 형태: Bits

---

## 역캡슐화 (Decapsulation)

- 수신자가 데이터를 받을 때, 물리 계층에서 응용 계층으로 올라가며 각 계층에서 헤더를 제거하고 데이터를 처리하는 과정
1. 물리 계층: 신호를 비트로 변환
2. 데이터 링크 계층: 프레임 단위로 재구성, MAC 확인
3. 네트워크 계층: IP 주소 확인 및 제거
4. 전송 계층: 포트 번호 확인, 세그먼트 재조립
5. 응용 계층: 사용자에게 데이터 제공

---

## 전체 요약

| 계층             | 송신 측 (캡슐화)                 | 수신 측 (역캡슐화)            |
|------------------|----------------------------------|-------------------------------|
| 응용 계층        | 사용자 데이터 생성               | 사용자에게 데이터 전달        |
| 전송 계층        | 포트 번호, 세그먼트로 나눔       | 포트 확인, 재조립             |
| 네트워크 계층    | IP 주소 부착                     | IP 주소 확인, 제거            |
| 데이터 링크 계층 | MAC 주소, 오류 검출 정보 부착     | MAC 주소 확인, 오류 검사 제거 |
| 물리 계층        | 비트/신호로 변환                 | 비트 수신, 신호 해석          |

---

### 참고자료

[캡슐화와 역캡슐화](https://velog.io/@qmasem/TIL-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%BA%A1%EC%8A%90%ED%99%94-%EC%97%AD%EC%BA%A1%EC%8A%90%ED%99%94-encapsulation-decapsulation)