# TCP vs UDP

---

## 1. TCP와 UDP란?

- TCP와 UDP는 TCP/IP 모델의 전송 계층에서 사용하는 프로토콜로, IP 프로토콜을 기반으로 하여 데이터를 한 컴퓨터에서 다른 컴퓨터로 전달
- TCP (Transmission Control Protocol): 신뢰성이 중요한 경우에 사용되며, 데이터의 정확한 전달을 보장합
- UDP (User Datagram Protocol): 연속성이 중요한 경우에 사용되며, 빠른 전송을 위해 신뢰성보다는 속도를 중시

---

## 2. TCP의 특징

### 연결형 서비스

- TCP는 연결형 서비스로, 가상 회선을 제공
- 3-way handshaking: 연결 설정 과정. 클라이언트와 서버가 SYN, SYN-ACK, ACK 패킷을 교환하여 연결을 설정
- 4-way handshaking: 연결 해제 과정. FIN과 ACK 패킷을 교환하여 연결을 종료

### 흐름 제어 (Flow Control)

- 수신자의 버퍼 오버플로우를 방지하기 위해 데이터 처리 속도를 조절
- 수신자는 윈도우 크기(Window Size)를 통해 수신량을 조절할 수 있다

### 혼잡 제어 (Congestion Control)

- 네트워크 내의 패킷 수가 과도하게 증가하지 않도록 방지하여 혼잡 붕괴를 예방

### 신뢰성 있는 전송

- Dupack 기반 재전송: ACK 값이 중복될 경우 패킷 이상을 감지하고 재전송을 요청
- 타임아웃 기반 재전송: 일정 시간 동안 ACK를 받지 못하면 재전송을 요청

### 전이중, 점대점 방식

- 전이중 (Full-Duplex): 양방향으로 동시에 데이터 전송이 가능
- 점대점 (Point to Point): 각 연결이 정확히 두 개의 종단점을 가짐

### TCP 헤더 정보

| 필드                          | 설명                                                                 | 크기(bit) |
|-------------------------------|----------------------------------------------------------------------|-----------|
| 송수신자의 포트 번호          | TCP로 연결되는 가상 회선 양단의 송수신 프로세스에 할당되는 포트 주소   | 16        |
| 시퀀스 번호 (Sequence Number) | 송신자가 지정하는 순서 번호, 전송되는 바이트 수를 기준으로 증가        | 32        |
| 응답 번호 (ACK Number)        | 수신 프로세스가 제대로 수신한 바이트의 수를 응답하기 위해 사용         | 32        |
| 데이터 오프셋 (Data Offset)   | TCP 세그먼트의 시작 위치를 기준으로 데이터의 시작 위치 표현 (TCP 헤더의 크기) | 4         |
| 예약 필드 (Reserved)          | 사용하지 않지만 나중을 위한 예약 필드, 0으로 채워져야 함              | 6         |
| 제어 비트 (Flag bit)          | SYN, ACK, FIN 등의 제어 번호                                           | 6         |
| 윈도우 크기 (Window Size)     | 수신 윈도우의 버퍼 크기를 지정할 때 사용, 0이면 프로세스의 전송 중지   | 16        |
| 체크섬 (Checksum)             | TCP 세그먼트에 포함되는 프로토콜 헤더와 데이터에 대한 오류 검출 용도   | 16        |
| 긴급 위치 (Urgent Pointer)    | 긴급 데이터를 처리하기 위해 사용, URG 플래그 비트가 지정된 경우에만 유효 | 16        |


### 제어 비트 정보

- URG: 긴급 위치 필드가 유효함을 나타냄
- ACK: 응답 번호 필드가 유효함을 나타냄
- PSH: 수신 애플리케이션에 버퍼링된 데이터를 상위 계층에 전달
- RST: 연결의 리셋이나 유효하지 않은 세그먼트에 대해 응답
- SYN: 연결 설정 요청
- FIN: 더 이상 전송할 데이터가 없음

---

## 3. UDP의 특징

### 비연결형 서비스

- UDP는 비연결형 서비스로, TCP와 같은 연결 절차 없이 데이터를 전송

### 비신뢰성 서비스

- UDP는 수신자가 패킷을 제대로 받았는지 확인하지 않고 데이터를 전송

### UDP 헤더 정보

| 필드                   | 설명                                                              | 크기(bit) |
|------------------------|-------------------------------------------------------------------|-----------|
| 송수신자의 포트 번호   | UDP로 연결되는 가상 회선 양단의 송수신 프로세스에 할당되는 포트 주소 | 16        |
| 데이터의 길이          | UDP 헤더와 데이터의 총 길이                                         | 16        |
| 체크섬 (Checksum)      | UDP 데이터그램에 포함되는 프로토콜 헤더와 데이터에 대한 오류 검출 용도 | 16        |

---

## TCP와 UDP의 차이점

| 항목             | TCP                          | UDP                                       |
|------------------|------------------------------|-------------------------------------------|
| 연결 방식        | 연결형 프로토콜               | 비연결형 프로토콜                          |
| 데이터 경계      | 데이터의 경계를 구분하지 않음 | 데이터의 경계를 구분함                    |
| 신뢰성           | 신뢰성 있는 데이터 전송       | 비신뢰성의 데이터 전송                    |
| 통신 방식        | 일 대 일(Unicast) 통신        | 일 대 일, 일 대 다(Broadcast), 다 대 다(Multicast) 통신 |

---

### 참고자료

[TCP와 UDP](https://pro-dev.tistory.com/58)