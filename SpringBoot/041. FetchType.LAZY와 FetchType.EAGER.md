# FetchType.LAZY와 FetchType.EAGER

---

## 1. FetchType.LAZY (지연 로딩)

### 정의
 
- 연관된 데이터를 실제로 사용할 때까지 로딩을 지연시키는 방식이다. 

### 동작 방식

- 엔티티를 조회할 때 연관된 데이터는 로드되지 않는다. 
- 연관된 데이터에 접근하려고 할 때 데이터베이스에서 해당 데이터를 조회한다.

### 장점

- 필요하지 않은 데이터를 미리 로드하지 않기 때문에 초기 조회 성능이 좋다. 
- 필요한 시점까지 데이터를 로딩하지 않기 때문에 메모리 사용을 줄일 수 있다.

### 단점

- 연관 데이터를 사용할 때마다 추가 쿼리가 발생할 수 있다. 
- 지연된 로딩으로 인해 예기치 않은 시점에 DB에 접근하게 될 수 있다.

---

## 2. FetchType.EAGER (즉시 로딩)

### 정의

- 엔티티가 조회될 때 연관된 데이터도 함께 조회되는 방식이다.

### 동작 방식

- 엔티티를 조회할 때 연관된 데이터도 같이 조회된다. 
- 연관 데이터 접근 시 추가 쿼리가 발생하지 않는다.

### 장점

- 연관 데이터가 미리 로딩되기 때문에 사용할 때 지연 없이 바로 사용할 수 있다. 
- 연관 데이터를 사용할 때 추가 쿼리가 발생하지 않아 전체 쿼리 수를 줄일 수 있다.

### 단점

- 처음 조회할 때 모든 연관 데이터를 로드하므로 성능 저하가 발생할 수 있다. 
- 사용하지 않을 데이터를 미리 로딩하므로 메모리 사용량이 늘어난다.

---

## 3. 차이점 요약

| 항목         | FetchType.LAZY                          | FetchType.EAGER                             |
|--------------|------------------------------------------|----------------------------------------------|
| 로딩 시점    | 연관 데이터가 필요할 때 로드함           | 엔티티와 함께 연관 데이터를 로드함           |
| 성능         | 초기 조회 성능이 좋음                    | 초기 조회 성능이 낮을 수 있음                |
| 메모리 사용  | 메모리 사용량이 적음                    | 메모리 사용량이 많음                         |
| 쿼리 수      | 연관 데이터 접근 시마다 쿼리 발생 가능   | 추가 쿼리 발생하지 않음                      |


--- 

## 4. 적용 가이드

- FetchType.LAZY는 연관된 데이터가 자주 사용되지 않을 때 사용하는 것이 좋다. 초기 성능이 중요할 경우 유리하다. 
- FetchType.EAGER는 연관된 데이터가 항상 필요할 때 사용하는 것이 적절하다. 별도 쿼리 없이 데이터를 바로 사용할 수 있다는 장점이 있다.

---

### 참고자료

[FetchType.LAZY와 FetchType.EAGER](https://cocoyang.tistory.com/70)