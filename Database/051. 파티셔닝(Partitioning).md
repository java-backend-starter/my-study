# 파티셔닝(Partitioning)

---

## 1. DB 파티셔닝(Partitioning)

### 개념
   
- 테이블 또는 인덱스 데이터를 '파티션(Partition)' 단위로 나누어 저장하는 기술.

### 파티셔닝 등장 배경
   
- 서비스 규모 및 데이터 용량이 대용량화되면서 기존 DB 시스템의 용량 한계와 성능 저하 문제가 발생. 
- VLDB(Very Large DBMS) 환경에서 테이블 크기 문제를 해결하기 위해 등장. 
- 소프트웨어적으로 데이터를 분산 처리하여 성능 향상과 관리 용이성 확보.

### 파티셔닝 목적
   
#### 성능(Performance)

- 특정 DML, Query 성능 향상. 
- 대용량 데이터 WRITE 환경에 효율적. 
- Full Scan 시 데이터 접근 범위 축소. 
- OLTP 시스템에서 INSERT 경합 줄임.

#### 가용성(Availability)

- 전체 데이터 훼손 가능성 감소. 
- Partition별 독립 백업 및 복구 가능. 
- Disk I/O 분산으로 UPDATE 성능 향상.

#### 관리용이성(Manageability)

- 대형 테이블 관리 부담 감소.

---

## 2. 파티셔닝 장단점

### 장점

- Partition 단위 백업, 추가, 삭제, 변경 가능. 
- 데이터 가용성 향상. 
- Partition별 I/O 분산 → 성능 개선. 
- 필요한 데이터만 조회 → Query 경량화.

### 단점

- 테이블 간 JOIN 비용 증가. 
- 테이블과 인덱스를 별도로 파티셔닝 불가 (같이 파티셔닝 필요).

---

## 3. 파티셔닝 종류

### 수평 파티셔닝 (Horizontal Partitioning)
   
- 정의: 하나의 테이블의 행(row) 을 여러 테이블로 분산 저장하는 것. 
- 특징
  - 퍼포먼스, 가용성 향상을 위해 Key 기반으로 여러 곳에 분산. 
  - 일반적으로 하나의 데이터베이스 안에서 수평 분할 수행. 
  - 분산 저장 기술에서 기본적으로 의미하는 '파티셔닝'이 수평 분할임.
- 장점 
  - 데이터 개수 기준으로 분할 → 데이터와 인덱스 개수 감소 → 성능 향상.
- 단점 
  - 서버 간 연결 과정이 많아져 복잡성 증가. 
  - 데이터 탐색 과정이 복잡 → Latency 증가. 
  - 서버 장애 발생 시 데이터 무결성 위험.

### 수직 파티셔닝 (Vertical Partitioning)
   
- 정의: 테이블의 열(column) 을 분리하는 것.
- 특징 
  - 관계형 DB 정규화(특히 3정규형)와 유사한 개념. 
  - 다만 수직 파티셔닝은 이미 정규화된 데이터를 추가로 분리하는 과정.
- 장점 
  - 자주 사용하는 컬럼만 분리 → I/O 최적화 및 성능 향상. 
  - 필요한 컬럼만 메모리에 적재 → 더 많은 ROW를 한 번에 처리 가능. 
  - 같은 타입의 데이터 저장 → 데이터 압축률 향상.
- 단점 
  - 데이터 탐색 과정이 복잡 → Latency 증가.

---

## 4. 파티셔닝 분할 기준

- Partitioning Key를 기준으로 다양한 분할 방식 제공.

### 범위 분할 (Range Partitioning)
   
- 기준: 연속적인 숫자나 날짜. 
- 방식: 분할 키 값이 특정 범위 내에 있는지로 파티션 결정. 
- 적합 데이터: 우편번호, 날짜 등.

### 목록 분할 (List Partitioning)
   
- 기준: 명시된 값 목록. 
- 방식: 분할 키 값을 목록과 비교하여 파티션 결정. 
- 특징 
  - 특정 데이터에 대한 명시적 제어 가능. 
  - 분포도가 비슷하고 조건 검색이 많은 경우 유리.
- 예시: Country 컬럼 값이 Iceland, Norway, Sweden, Finland, Denmark → "북유럽 파티션" 구성.

### 해시 분할 (Hash Partitioning)
   
- 기준: 파티션 키의 해시 값. 
- 방식: 해시 함수를 이용해 균등하게 데이터 분산. 
- 특징 
  - 특정 데이터가 어느 파티션에 있는지 예측 어려움. 
  - 범위가 없는 데이터에 적합.
- 예시: 해시 함수 결과 0~3 → 4개의 파티션에 분배.

### 합성 분할 (Composite Partitioning)
   
- 기준: 두 가지 이상의 분할 방식 결합. 
- 방식: 파티션을 나눈 후 다시 서브 파티션을 생성. 
- 특징
  - 큰 파티션의 I/O 요청을 여러 파티션으로 분산 가능.
- 예시: 먼저 범위 분할 후, 각 범위별로 해시 분할.

---

### 참고자료

[파티셔닝(Partitioning)](https://velog.io/@kyeun95/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B2%A0%EC%9D%B4%EC%8A%A4-%ED%8C%8C%ED%8B%B0%EC%85%94%EB%8B%9DPartitioning%EC%9D%B4%EB%9E%80)