# 캐시

---

## 2. 캐시(Cache)란?

- 원본 데이터보다 빠르고 효율적으로 접근 가능한 임시 저장소
- 자주 사용된 데이터는 다시 사용될 가능성이 높다는 원리를 이용

---

## 3. 캐시가 적합한 데이터

- 단순한 구조의 데이터
- 반복적으로 조회되는 데이터
- 변경 주기가 길고 처리 시간이 오래 걸리는 데이터
- 실시간 최신화가 필요하지 않은 데이터

---

## 4. 캐시의 장점

- 서버 간 트래픽 감소 → 애플리케이션 서버의 부하 완화
- 빠른 응답 속도 → 사용자 경험 향상

---

## 5. 캐싱의 종류

### 5.1 데이터베이스 캐싱

- DB 쿼리 결과를 캐싱하여 응답 시간 단축

### 5.2 응답 캐싱

- 웹 서버 응답을 메모리에 캐싱

### 5.3 브라우저 캐싱

- 브라우저가 HTML, CSS, JS, 이미지 등을 임시 저장

---

## 6. 응답 캐싱 방식

### 6.1 Local Cache

- 로컬 장비(Memory, Disk 등)의 리소스를 사용하는 캐시
- 서버 애플리케이션 내부에서 동작하며, 네트워크를 사용하지 않음

#### 장점

- 빠른 속도 (로컬 메모리 접근)
- 네트워크 지연 및 단절에 영향 없음
- 서버 애플리케이션과 라이프 사이클을 같이 하므로 사용이 간편함
- 간단한 캐시는 메모리 기반으로 동작하는 것이 효율적일 수 있음

#### 단점

- 휘발성 메모리: 애플리케이션 종료 시 캐시 데이터 소실
- 서버 간 캐시 데이터 불일치 가능성
- 애플리케이션 메모리 부족 문제 → 서버 스케일 업 필요

---

### 6.2 Global Cache

- 여러 서버가 공통된 Cache Server에 접근하여 사용하는 방식

#### 장점

- 데이터를 분산 저장 가능 (Sharding)
- 데이터를 복제하여 신뢰성 확보 (Replication)
- 별도의 Cache Server 사용 → 서버 간 데이터 공유 용이
- 시스템 확장성 우수

#### 단점

- 네트워크 트래픽 증가 → Local Cache보다 속도가 느릴 수 있음
- 네트워크 단절 시 장애 가능성 존재

---

## 7. 캐시와 데이터 저장소의 배치 전략

### 7.1 읽기 전략 (Read Strategies)

#### Cache Aside (Look Aside)

- 애플리케이션이 먼저 캐시를 조회하고, 없으면 DB에서 데이터를 조회한 후 캐시에 저장

##### 장점

- 읽기 중심 서비스에 적합
- 캐시 장애 시에도 DB를 통해 서비스 지속 가능
- 동일 쿼리가 반복되는 경우 효율적

##### 단점

- 캐시와 DB 간 데이터 정합성 유지 어려움
- 캐시에 데이터가 없을 경우 응답 시간 증가
- 초기 캐시 적중률 낮음 → Cache Warming 작업 필요

---

#### Read Through

- 캐시가 DB와 직접 연동되어, 캐시에 데이터가 없을 경우 자동으로 DB에서 데이터를 조회하고 저장

##### 특징

- Cache Aside보다 일관된 접근 방식 제공
- 초기 cache miss 문제를 완화하기 위해, 애플리케이션에서 저장 시 캐시에 미리 저장 가능

---

### 7.2 쓰기 전략 (Write Strategies)

#### Write Back (Write Behind)

- 데이터는 먼저 캐시에 저장되고, 비동기적으로 나중에 DB에 반영

##### 장점

- DB 부하 감소
- 대량 쓰기 처리에 유리
- 캐시가 Queue 역할을 하며 일시적인 DB 장애에도 대응 가능
- 캐시와 DB 간 데이터 정합성 유지에 유리

##### 단점

- 캐시에서 DB로 반영되기 전에 장애 발생 시 데이터 유실 위험
- 사용되지 않는 데이터가 리소스를 차지할 수 있음 → TTL 설정 필요

---

#### Write Through

- 데이터는 캐시와 DB에 동시에 저장

##### 장점

- 항상 최신 데이터 유지
- 정합성 뛰어남

##### 단점

- 저장 시 두 번 저장 작업 발생 → 상대적으로 느림
- 자주 읽히지 않는 데이터에 대해 리소스 낭비 → TTL 설정 필요

---

#### Write Around

- 데이터는 DB에만 저장하고, 읽힐 때만 캐시에 저장

##### 장점

- Write Through보다 빠름
- 자주 읽히지 않는 데이터에 적합 (예: 로그, 채팅 메시지 등)

##### 단점

- 데이터 정합성 문제 가능성 존재
- cache miss 시 다시 DB 접근 필요 → Read latency 발생
- Read Through 또는 Cache Aside 전략과 결합 가능

---

## 8. 결론

- 캐싱 전략은 시스템 특성과 요구사항에 따라 선택 필요
- 응답 속도 개선, 서버 부하 감소, 사용자 경험 향상을 위한 중요한 기법

---

### 참고자료

[캐시](https://kk-programming.tistory.com/83)