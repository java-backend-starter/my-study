# 데이터베이스 백업 전략

---

## 1.백업

### 백업의 이해

- 데이터베이스는 중요한 데이터를 중앙집중식으로 저장
- DBMS 장애 발생 시 전체 서비스 중단 가능
- 장애 원인: 운영체제 오류, 전원 차단, 파일 시스템 오류, 하드웨어 오동작, 사용자 실수, 보안 공격 등
- 사고 이전 시점으로 복구하기 위해 복제된 데이터 마련 필요
- 데이터 훼손, 변조, 손실 등을 방지하기 위해 백업 필요

### 백업의 정의

- 데이터와 트랜잭션 작업을 주기적으로 저장하는 작업
- 백업 방법 및 주기를 정하고, 별도 저장장치에 관리

### 백업의 방법

- 방식별 구분
    - 물리적 백업: 데이터 원본 파일을 직접 복사
    - 논리적 백업: DML(SQL문)로 데이터 추출
- 상태별 구분
    - 온라인 백업(Hot Backup): DBMS 가동 중 백업
    - 오프라인 백업(Cold Backup): DBMS 정지 후 백업
- 대상별 구분
    - 전체 백업: 모든 데이터 백업
    - 증분 백업: 변경된 데이터만 백업
- 장소별 구분
    - 로컬 백업: 동일 컴퓨터에 백업
    - 원격 백업: 원격 서버에 백업

---

## 2. MySQL에서의 백업 방법

### 디렉토리 전체 복사

- 물리적 백업 방식
- 데이터 파일(.FRM, .MYD, .MYI)을 복사
- 빠르고 백업 용량이 적음
- 하드웨어 구성이 유사해야 복구 가능

### mysqldump 유틸리티 사용

- 논리적 백업 방식
- SQL INSERT 문으로 백업 파일 생성
- 스키마, 테이블 단위로 백업 가능
- 서버 가동 중에도 사용 가능
- 로컬 백업만 지원

### MySQL Workbench 사용

- mysqldump의 GUI 버전
- [Server] → [Data Export] 메뉴 사용
- 테이블 생성(CREATE TABLE)과 데이터 삽입(INSERT INTO) 스크립트 생성

---

## 3. 복원

### 복원의 이해

- 실수, 오류, 공격 등으로 훼손된 데이터를 복구하기 위한 기능
- 특정 시점으로 복구 필요

### 복원의 정의

- 백업 데이터 + 이진 로그를 이용해 특정 시점 데이터베이스 상태로 복귀

### 복원의 방법

- 물리적 백업 데이터 복원
- 논리적 백업 데이터 복원
- MySQL Workbench를 통한 복원

---

## 4. MySQL에서의 복원 방법

### 물리적 백업 복원

- 복제한 데이터 파일을 `datadir` 디렉터리에 위치
- 하드웨어 구성 유사성 필요

### 논리적 백업 복원

- 1차 복원: 논리적 백업 데이터로 복구
- 2차 복원: 이진 로그(mysqlbinlog 사용)로 추가 작업 복구
- 복원 CLI 구문
    - `mysql -u 사용자명 -p 데이터베이스명 < 파일명`
    - `mysqlbinlog --database=DB명 --start-datetime="날짜 및 시간" | mysql`

### MySQL Workbench 사용

- mysql 클라이언트 유틸리티의 GUI 버전
- [Server] → [Data Import] 메뉴 사용

---

### 참고자료

[데이터베이스 백업 전략](https://velog.io/@woods0611/DB%EA%B5%AC%ED%98%84-%EB%B0%B1%EC%97%85%EA%B3%BC-%EB%B3%B5%EC%9B%90)