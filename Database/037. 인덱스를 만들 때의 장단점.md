# 인덱스를 만들 때의 장단점

---

### 인덱스(index)란?

- 인덱스는 데이터베이스 검색 속도를 높이는 데 사용되는 자료구조이다.
- 인덱스를 책의 색인에 비유할 수 있다.
  - 책 뒤에 있는 색인을 통해 필요한 정보를 빠르게 찾을 수 있는 것처럼, 데이터베이스에서도 인덱스를 사용하면 원하는 데이터를 더 빠르게 찾을 수 있다.
  - 색인이 없다면 책의 첫 페이지부터 마지막 페이지까지 모두 넘겨보아야 하는 것처럼, 인덱스가 없으면 데이터베이스에서 원하는 정보를 찾기 위해 모든 데이터를 하나하나 검색해야 한다.

### 인덱스의 관리

- 인덱스는 항상 최신의 정렬 상태를 유지해야 원하는 값을 빠르게 탐색할 수 있다. 
- 따라서 인덱스가 적용된 컬럼에 변경 작업이 발생하면 추가적인 연산을 해야 하므로 오버헤드가 발생한다.
  - INSERT: 새로운 데이터에 대해 인덱스를 추가해야 한다.
  - DELETE: 삭제되는 데이터의 인덱스를 더 이상 사용하지 않도록 처리해야 한다.
  - UPDATE: 기존의 인덱스를 사용하지 않도록 처리하고, 갱신된 데이터에 대해 새로운 인덱스를 추가해야 한다.

### 인덱스의 장점과 단점

#### 장점

- 조회 속도 향상
  - 인덱스를 사용하면 데이터를 빠르게 검색할 수 있어 조회 속도가 향상된다.
- 검색 부하 감소
  - 쿼리 부하를 줄여 데이터베이스 성능을 향상시킬 수 있다.

#### 단점

- 추가 공간 필요
  - 인덱스를 저장하기 위한 공간이 필요하며, 데이터베이스 크기의 약 10% 정도 추가 공간이 요구된다.
- 생성 시간 소요
  - 인덱스를 처음 생성할 때 시간이 많이 소요된다.
- 변경 빈도가 높은 컬럼에 인덱스 사용 시 성능 저하
  - 변경이 빈번한 컬럼에 인덱스를 적용하면 인덱스 크기가 비대해져 성능이 오히려 저하될 수 있다.

### 인덱스를 사용하면 좋은 경우

- 규모가 큰 테이블
  - 데이터 양이 많아지면 조회 속도 향상을 위해 인덱스를 사용하는 것이 유리하다.
- 변경이 잦지 않은 테이블
  - 변경이 자주 일어나지 않는 테이블에 인덱스를 사용하면 효율적이다.
- JOIN, WHERE 절, ORDER BY 자주 사용
  - 이들 조건에 자주 사용되는 컬럼에 인덱스를 생성하면 성능을 크게 개선할 수 있다.
- 데이터의 중복도가 낮은 컬럼
  - 중복 데이터가 적은 컬럼에 인덱스를 사용하는 것이 좋다. 
  - 중복된 키가 많으면 검색 대상을 증가시켜 성능에 부정적인 영향을 미칠 수 있다.

### 인덱스의 종류

#### 클러스터형 인덱스 (Clustered Index)

- 테이블당 하나만 생성: 클러스터형 인덱스는 테이블당 하나만 생성할 수 있다.
- 행 데이터 정렬: 인덱스로 지정한 열에 맞춰 테이블의 실제 데이터가 자동으로 정렬된다.

#### 비클러스터형 인덱스 (Non-clustered Index)

- 여러 개 생성 가능: 비클러스터형 인덱스는 테이블에 여러 개 생성할 수 있다.


---

### 참고자료

[인덱스 사용 시 장단점](https://youn0111.tistory.com/101)