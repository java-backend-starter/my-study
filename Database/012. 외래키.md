# 외래키

---

## 1. 외래키(Foreign Key)

- 한 테이블의 특정 필드가 다른 테이블의 기본키(Primary Key)를 참조하도록 설정하여, 테이블 간의 관계를 정의하고 데이터의 무결성을 유지하는 데 사용

### 외래키의 주요 특징

- 데이터 무결성 유지 
  - 부모 테이블의 기본키를 참조하므로, 부모 테이블에 존재하지 않는 값을 자식 테이블에 입력할 수 없음
- 데이터 일관성 유지 
  - 부모 테이블의 데이터가 변경되면, 이를 참조하는 자식 테이블의 데이터도 함께 변경되거나 삭제될 수 있음
- 관계 정의 
  - 테이블 간의 관계를 명시적으로 정의하여, 복잡한 쿼리나 조인을 보다 쉽게 수행할 수 있음
- 외래키 생성 방법 
  - 외래키는 테이블 생성 시 또는 기존 테이블에 추가할 때 설정할 수 있음

### 테이블 생성 시 외래키 설정

```sql
CREATE TABLE 자식_테이블 (
자식_컬럼 INT NOT NULL,
...
FOREIGN KEY (자식_컬럼) REFERENCES 부모_테이블(부모_컬럼)
);
```

### 기존 테이블에 외래키 추가

```sql
ALTER TABLE 자식_테이블
ADD CONSTRAINT 외래키_이름
FOREIGN KEY (자식_컬럼) REFERENCES 부모_테이블(부모_컬럼);
```
---

## 2. 외래키 제약조건

- 외래키는 부모 테이블의 데이터 변경 시 자식 테이블에 미치는 영향을 제어하기 위해 다양한 제약조건을 설정할 수 있음
- ON DELETE: 부모 테이블의 행이 삭제될 때 
  - CASCADE: 자식 테이블의 해당 행도 함께 삭제
  - SET NULL: 자식 테이블의 해당 외래키 값을 NULL로 설정 
  - RESTRICT: 자식 테이블에서 참조 중이면 삭제를 거부
- ON UPDATE: 부모 테이블의 기본키 값이 변경될 때 
  - CASCADE: 자식 테이블의 외래키 값도 함께 변경
  - SET NULL: 자식 테이블의 외래키 값을 NULL로 설정 
  - RESTRICT: 자식 테이블에서 참조 중이면 변경을 거부합니다.
- 이러한 제약조건을 통해 데이터베이스의 무결성과 일관성을 유지할 수 있음

--- 

## 3. 기본키(Primary Key)와 고유키(Unique Key)

### 기본키 (Primary Key)

- 테이블에서 각 행을 고유하게 식별하는 필드. 
- NULL 값을 허용하지 않음 
- 테이블당 하나만 존재 가능

### 고유키 (Unique Key)

- 특정 필드의 값이 고유하도록 강제하는 제약조건. 
- NULL 값 허용 가능 
- 한 테이블에 여러 개 설정 가능

---

### 참고자료

[외래키](https://boring9.tistory.com/54)