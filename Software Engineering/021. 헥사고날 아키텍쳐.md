# 헥사고날 아키텍쳐

---

## 1. 개요

- 정의: 내부 비즈니스 로직을 외부 요소(프레임워크, 라이브러리 등)로부터 완전히 분리하여 유연하고 유지보수하기 쉬운 구조를 만드는 소프트웨어 아키텍처 패턴.
- 별칭: 포트 & 어댑터 아키텍처 (Ports and Adapters Architecture)
- 비유: 육각형(헥사고날)처럼 여러 방향에서 연결 가능하지만 중심은 항상 도메인 로직.

---

## 2. 핵심 개념

### 내부와 외부의 분리

- 내부 영역 (도메인): 핵심 비즈니스 로직
- 외부 영역 (인프라): UI, DB, 외부 API 등

### 포트(Port)와 어댑터(Adapter)

#### 포트 (Port)

- 내부 영역과 외부 영역을 연결하는 인터페이스(API)
- 인바운드 포트: 외부에서 내부로의 입력 (예: UseCase 인터페이스)
- 아웃바운드 포트: 내부에서 외부 시스템 사용 (예: Repository 인터페이스)

#### 어댑터 (Adapter)

- 실제 구현체로, 포트를 구현하거나 포트를 통해 내부 로직을 호출
- Primary (Driving) Adapter: 사용자 입력을 받아 내부 호출 (예: Controller, UI)
- Secondary (Driven) Adapter: 외부 시스템과 연결되어 내부 요청 처리 (예: DB, 외부 API)

---

## 3. 구성도

```
[ UI / API ]  →  [ Primary Adapter ]  →  [ Inbound Port ]  
                                         ↓  
                             [ Application / Domain ]  
                                         ↓  
                     [ Outbound Port ]  →  [ Secondary Adapter ]  →  [ DB / 외부 시스템 ]

```

---

## 4. 장점

- 도메인 비즈니스 모델에 집중 가능 
  - DIP(의존성 역전 원칙)를 통해 도메인이 외부 요소에 의존하지 않음 
  - 외부 기술에 신경 쓰지 않고 비즈니스 로직 개발 가능
- 모듈별 독립 배포 용이 
  - 도메인과 기술 간의 분리 
  - 도메인 단위로 기능을 분리해 느슨한 결합 구조 형성
- 기능 확장 용이
  - 새로운 기능이 필요하면 해당 포트와 어댑터만 추가하면 됨
- 테스트 용이성 
  - 포트를 중심으로 외부 의존성을 분리 
  - 모킹 어댑터를 사용해 테스트 가능 
  - 내부 로직은 외부에 의존하지 않으므로 모킹 자체가 필요 없는 경우도 많음
- 개발 비용 감소 
  - 계층 간 의존성이 낮고 유연성 증가 
  - 빠른 요구사항 대응 및 테스트 적용 용이
- SoC(관심사 분리) 실현 
  - 외부 연결 문제: 어댑터 확인 
  - 인터페이스 정의 변경: 포트 수정 
  - 비즈니스 로직 오류: 도메인 로직만 점검 
  - 문제 파악과 수정이 용이하여 유지보수 효율 향상

---

## 5. 단점

- 코드 증가
    - 각 계층별 모델 관리 필요
    - 매핑 로직 추가
- 초기 학습 난이도
    - 포트, 어댑터 개념 학습 필요
- 복잡도 증가
    - 작은 프로젝트에는 과도할 수 있음

---

## 6. 요약

| 항목 | 설명 |
|------|------|
| 목적 | 외부 의존 제거, 유연하고 테스트 가능한 구조 구현 |
| 구성 | 내부(도메인), 외부(어댑터), 포트(인터페이스) |
| 핵심 개념 | 포트 & 어댑터, DIP, 관심사 분리(SoC) |
| 적합한 경우 | 다양한 외부 시스템과 연동되거나 비즈니스 로직이 중요한 시스템 |

---

### 참고자료

[헥사고날 아키텍쳐](https://cantcoding.tistory.com/107)