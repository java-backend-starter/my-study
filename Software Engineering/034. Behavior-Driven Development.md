# 행동 주도 개발 (BDD, Behavior-Driven Development)

---

## 1. BDD란?

- BDD는 소프트웨어 개발 및 테스트 방법론 중 하나로, 개발자와 비즈니스 이해관계자들이 협력하여 소프트웨어의 동작을 정의하고 검증하는 방식이다. 
- 주된 목적은 코드가 요구사항을 충족하는지 확인하는 데 있다. 
- 이를 위해 "행동"을 중심으로 소프트웨어의 동작을 정의하고, 자연어로 작성된 시나리오(예: Gherkin 문법)를 사용하여 비즈니스 요구사항을 쉽게 이해하고 개발 및 테스트에 반영할 수 있게 한다.

### BDD의 핵심 원칙

1. 소통을 통한 협업
   - 개발자와 비즈니스 이해관계자가 긴밀히 협력하여 시스템의 동작을 정의한다. 
   - 이를 통해 요구사항의 이해도를 높이고, 구현 단계에서 발생할 수 있는 오해를 줄인다.
2. 기능을 중심으로 개발
   - 시스템의 각 기능이 어떻게 동작해야 하는지에 초점을 맞춘다. 
   - 즉, "어떻게" 동작하는지를 정의한다.
3. 자동화된 테스트
   - BDD는 테스트 주도 개발(TDD)과 밀접하게 연관되어 있다. 
   - 기능 요구사항에 맞는 테스트 케이스를 작성하여 지속적으로 검증한다.

### BDD와 TDD의 차이점

- TDD(Test-Driven Development)는 테스트를 먼저 작성하고, 이를 통과하는 코드를 작성하는 방식으로 코드의 품질에 집중한다.
- BDD는 기능적 요구사항을 명확히 하고 그것이 비즈니스 목표와 일치하는지를 확인하는 데 초점을 맞춘다.

---

## 2.  BDD의 장점

1. 비즈니스 이해 관계자와의 원활한 소통  
   - BDD는 비즈니스 요구사항을 자연어로 정의할 수 있기 때문에, 개발자뿐 아니라 비즈니스 담당자도 요구사항을 쉽게 이해하고 피드백을 줄 수 있다. 
   - 이는 개발 초기부터 실제 비즈니스 목표에 부합하는 소프트웨어를 만드는 데 도움이 된다.
2. 가독성과 유지보수성 향상  
   - 테스트 코드가 자연어에 가까운 형식으로 작성되기 때문에, 팀의 모든 구성원이 테스트를 쉽게 이해하고 수정할 수 있다. 
   - 이는 코드의 가독성과 장기적인 유지보수성 향상에 기여한다.
3. 자동화된 테스트  
   - BDD에서는 테스트 자동화가 중요한 역할을 한다. 
   - BDD 도구(예: Cucumber, JBehave)를 사용하면 테스트 시나리오를 작성하고 자동으로 실행할 수 있다. 
   - 반복적인 테스트 작업을 줄이고 빠른 피드백을 받을 수 있게 한다.
4. 품질 향상  
   - 기능 요구사항을 먼저 테스트 시나리오로 정의하고 이를 기반으로 개발을 진행하므로, 제품의 품질을 높일 수 있다. 
   - 요구사항 기반 테스트는 기능이 제대로 작동하는지를 검증할 수 있게 한다.

---

## 3. BDD 적용 방법

1. 시나리오 작성  
   - BDD에서 가장 중요한 부분은 시나리오이다. 
   - 시나리오는 특정 기능이 어떻게 동작해야 하는지를 정의하며, 보통 Gherkin 문법을 사용해 작성한다. 
   - Gherkin은 Given-When-Then 패턴을 따른다.
     - Given: 초기 상태나 배경 (예: "사용자가 로그인 화면을 봤을 때")
     - When: 특정 행동이나 이벤트 (예: "사용자가 로그인 버튼을 클릭하면")
     - Then: 기대되는 결과나 반응 (예: "사용자가 대시보드 페이지로 이동한다")
2. 자동화된 테스트 도구 사용  
   - 시나리오를 작성한 뒤, 이를 자동화된 테스트로 변환하여 실행한다. 대표적인 BDD 도구는 다음과 같다.
     - Cucumber: Gherkin 문법을 사용하여 테스트 시나리오를 작성하고 자동화할 수 있다.
     - SpecFlow: .NET 환경에서 사용하는 BDD 도구이다.
     - JBehave: Java 기반 BDD 도구로, 시나리오를 자바 코드로 변환하여 실행할 수 있다.
3. 테스트 주도 개발(TDD)와의 결합  
   - BDD와 TDD는 상호 보완적인 관계이다. 
   - BDD는 요구사항 정의 중심의 테스트를 제공하고, TDD는 코드 기반 테스트로 이를 구현하는 과정을 돕는다.
4. 진행 및 피드백  
   - BDD는 지속적으로 요구사항에 대한 피드백을 받아들이고, 이를 기반으로 코드를 수정한다. 
   - 반복적인 피드백 과정을 통해 소프트웨어 품질을 향상시키고, 요구사항에 부합하는 결과물을 만들어낸다.

---

## 4. BDD 도입 시 고려사항

- 시나리오 작성의 어려움
  - 비즈니스와 기술 팀 간 협업이 원활히 이루어져야 하며, 시나리오 작성 시 너무 상세하거나 불필요한 설명을 피해야 한다. 
  - 핵심 기능에 집중하는 것이 중요하다.
- 도구와 프레임워크 선택
  - BDD 도구는 프로젝트와 팀 환경에 맞춰 선택해야 한다. 
  - 적합하지 않은 도구를 선택하거나 팀원이 익숙하지 않다면 오히려 생산성이 떨어질 수 있다.
- 지속적인 피드백 필요
  - BDD는 테스트와 피드백이 반복적으로 이루어져야 한다. 
  - 이를 통해 요구사항을 반영하고, 제품의 품질을 지속적으로 개선할 수 있다. 
  - 개발 과정 중 자주 논의하는 문화가 필요하다.

---

## 5. BDD 모범 사례

1. 공통된 언어 사용  
   - 개발자, 테스터, 비즈니스 이해관계자가 모두 이해할 수 있는 비즈니스 도메인 언어로 시나리오를 작성한다. 
   - 전문 용어보다는 일반적인 표현을 사용하여 의사소통의 격차를 줄인다.
2. 명확하고 간결한 시나리오 작성  
   - 시나리오는 하나의 기능이나 행동에 집중하여 작성한다. 
   - 불필요한 상세 정보나 복잡한 조건을 피하고 핵심에 집중한다.
3. Given-When-Then 패턴 준수  
   - 시나리오는 항상 Given(주어진 상황) - When(행동) - Then(결과) 구조를 따른다. 
   - 각 단계는 명확하고 테스트 가능한 요소로 구성한다.
4. 예제 기반 접근  
   - 추상적인 설명 대신 구체적인 예제를 통해 요구사항을 표현한다. 
   - 다양한 시나리오와 경계 조건을 고려하여 테스트 범위를 넓힌다.
5. 자동화 테스트와 연계  
   - 작성된 시나리오는 자동화 테스트로 구현되어야 한다. 
   - Cucumber, SpecFlow 등 BDD 도구를 활용하여 테스트를 자동화한다.
6. 지속적인 리팩토링  
   - 시나리오와 코드 베이스를 지속적으로 개선하고 정리한다. 
   - 중복된 코드나 불필요한 시나리오는 제거하여 유지보수성을 높인다.
7. 팀 협업 강화  
   - 시나리오 작성 단계에서부터 모든 팀원이 참여한다. 
   - 정기적인 회의를 통해 시나리오를 검토하고 피드백을 공유한다.
8. 비즈니스 가치에 초점  
   - 모든 시나리오는 비즈니스 목표와 사용자 가치를 반영해야 한다. 
   - 기술적인 구현보다는 사용자가 얻을 이익에 집중한다.
9. 명확한 수용 기준 설정  
   - 각 시나리오에 대한 명확한 수용 기준을 정의한다. 
   - 이는 기능 완료 여부를 판단하는 객관적인 기준이 된다.
10. 도구와 프로세스의 표준화  
    - 팀 내에서 사용하는 BDD 도구와 프로세스를 표준화하여 효율성을 높인다. 
    - 모범 사례를 문서화하여 신규 팀원 교육에 활용한다.
11. 교육과 문화 정착  
    - 팀원들이 BDD의 목적과 방법론을 충분히 이해하도록 교육한다. 
    - BDD를 조직 문화로 정착시켜 지속적인 개선을 도모한다.
12. 피드백 루프 구축  
    - 테스트 결과와 사용자 피드백을 빠르게 반영하여 시나리오와 제품을 개선한다. 
    - 짧은 개발 사이클을 유지하여 적시에 가치를 전달한다.

---

## 6. BDD 도구 소개

- Cucumber: 가장 널리 사용되는 BDD 도구로, 다양한 언어를 지원한다.
- SpecFlow: .NET 환경에서 사용하는 BDD 프레임워크이다.
- JBehave: Java 기반의 BDD 프레임워크로, JUnit과 연동된다.
- Behave: Python 기반의 BDD 프레임워크이다.

---

### 참고자료

[BDD](https://yoongrammer.tistory.com/115)