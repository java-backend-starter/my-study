# 전략 패턴

---

## 1. 전략 패턴(Strategy Pattern)

- 실행 중에 알고리즘을 선택하여 객체의 동작을 실시간으로 바꿀 수 있게 해주는 행위 디자인 패턴
- 여기서 "전략"이란 특정 목표를 달성하기 위한 알고리즘, 기능, 또는 동작을 의미 
- 여러 가지 알고리즘을 미리 정의하여 손쉽게 교체할 수 있는 방식 
- 이 패턴은 알고리즘 변형이 자주 필요한 경우에 유용

### 전략 패턴 구조

- 전략 알고리즘 객체들: 알고리즘, 행위, 동작을 객체로 정의한 구현체입니다. 
- 전략 인터페이스: 모든 전략 구현체에 대해 공통적인 인터페이스를 제공합니다. 
- 컨텍스트(Context): 알고리즘을 실행할 때마다 해당 알고리즘과 연결된 전략 객체의 메소드를 호출합니다. 
- 클라이언트: 특정 전략 객체를 컨텍스트에 전달하여 전략을 등록하거나 변경하고, 전략을 실행하여 결과를 얻습니다.

### 개념 설명

- 컨텍스트(Context): 프로그래밍에서 '컨텍스트'는 객체를 다루기 위한 접근 수단을 의미한다. 
- 예를 들어, 물컵은 물을 담는 컨텍스트이고, 그 안의 물은 콘텐츠이다.

### 전략 패턴의 핵심

- GoF(Design Patterns)에서 전략 패턴은 다음과 같이 정의
  - 동일 계열의 알고리즘군을 정의하고, 
  - 각 알고리즘을 캡슐화하여, 
  - 알고리즘을 상호 교환 가능하도록 만듭니다.
- 이는 알고리즘을 사용하는 클라이언트와는 독립적으로 알고리즘을 변경할 수 있다는 장점이 있다.

### OOP 원칙과 전략 패턴

- 전략 패턴은 객체지향 프로그래밍(OOP)의 여러 기술을 포함하는 패턴
  - SOLID 원칙의 OCP(개방-폐쇄 원칙)과 DIP(의존성 역전 원칙), 
  - 합성(Composition), 
  - 다형성(Polymorphism), 
  - 캡슐화(Encapsulation).
- 이들을 잘 결합하여 알고리즘을 독립적으로 관리하고, 실시간으로 교체할 수 있다.
  - 동일 계열의 알고리즘군을 정의 → 전략 구현체로 정의 
  - 각각의 알고리즘을 캡슐화 → 인터페이스로 추상화 
  - 이들을 상호 교환이 가능하도록 구성 → 합성(Composition)
  - 클라이언트와 독립적으로 알고리즘 변경 가능 → 메소드를 통해 전략 객체를 실시간으로 변경

---

## 2. 전략 패턴 특징

- 다양한 알고리즘 선택: 알고리즘의 여러 버전이나 변형이 필요할 때, 이를 클래스화하여 관리할 수 있다. 
- 캡슐화: 알고리즘 코드가 외부에 노출되지 않도록 하고, 필요한 데이터에만 접근하여 알고리즘을 안전하게 실행한다. 
- 런타임 변경: 알고리즘의 동작을 런타임에 실시간으로 변경할 수 있어, 동적으로 전략을 교체할 수 있다.

### 전략 패턴 사용 시기

- 알고리즘의 여러 버전이 필요할 때: 알고리즘을 클래스화하여 관리할 수 있다. 
- 데이터 보호: 알고리즘 코드가 외부에 노출되지 않도록 해야 할 때, 알고리즘을 캡슐화하여 보호한다. 
- 동적인 알고리즘 변경: 알고리즘의 동작을 실행 중에 실시간으로 변경해야 할 때 유용하다.

### 전략 패턴 주의점

- 객체 관리: 알고리즘이 많아질수록 관리해야 할 객체의 수가 늘어난다. 
- 복잡도 증가: 알고리즘이 많지 않거나 자주 변경되지 않는 어플리케이션에서는 새로운 클래스와 인터페이스를 추가하는 것이 오히려 복잡도를 증가시킬 수 있다. 
- 전략 선택의 어려움: 개발자는 각 전략의 차이를 잘 이해하고 있어야 하며, 적절한 전략을 선택해야 한다.


---

## 3. 실무에서 찾아보는 Strategy 패턴

### Java

- Collections의 sort() 메서드에 의해 구현되는 compare() 메서드에 이용 
- javax.servlet.http.HttpServlet에서 service() 메서드와 모든 doXXX() 메서드에 이용 
- javax.servlet.Filter의 doFilter() 메서드에 이용

#### Comparator

- 자바에서 익명 클래스를 사용하여 구현체를 그때그때 정의하고 동작 메소드의 로직을 실시간으로 변경하는 방식은, 
- 전략 패턴과 매우 유사하게 실시간으로 전략을 변경하여 지정하는 방법이라고 볼 수 있다.

### Node.js에서의 전략 패턴.

- Passport.js 라이브러리
  - passport.js는 OAuth 로그인을 구현하는 데 사용되는 유명한 자바스크립트 라이브러리이다. 
  - 이 라이브러리도 전략 패턴을 사용하여 구현되어 있다.
- 전략 패턴 적용
  - 예시 : passport.use(new SNSStrategy(), ...)와 같이 passport.use() 메서드에 전략 객체를 입력값으로 전달하여 로직을 수행한다. 
  - 이때 SNSStrategy가 바로 전략 객체로, 전략 패턴의 구조를 따르고 있다.

---

### 참고자료

[전략 패턴](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EC%A0%84%EB%9E%B5Strategy-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90)