# 파일 시스템

---

## 1. 파일 시스템의 개요

### 파일 시스템의 개념

- 파일 시스템은 컴퓨터에서 파일을 저장하고 관리하는 방식이다. 
- 하드디스크나 CD와 같은 제2 저장장치에 파일이 보관되며, 사용자가 직접 파일을 관리하면 다른 사용자의 파일을 훼손하거나 시스템을 어지럽힐 수 있다. 
- 운영체제는 이를 방지하기 위해 파일 관리자를 사용하여 파일을 안전하게 보관하고, 파일에 대한 요청을 관리한다. 
- 파일 관리자는 파일 테이블을 통해 파일을 관리하며, 사용자가 파일에 접근하려면 파일 디스크립터라는 권한을 얻어야 한다.

### 파일 시스템의 기능

- 운영체제는 파일 시스템을 통해 파일을 생성하고, 파일을 쉽게 관리할 수 있도록 디렉터리 구조를 제공한다. 
- 파일의 이름, 크기, 생성 날짜 등 다양한 정보를 파일 헤더에 저장하여 파일을 관리한다. 
- 운영체제마다 파일 시스템 구현 방식은 다르지만, 대부분 파일 테이블을 사용하여 파일을 관리한다. 
  - 예를 들어, 윈도우는 FAT, NTFS와 같은 파일 시스템을 사용하고, 유닉스는 I-node 방식으로 파일을 관리한다.

### 불록과 파일 테이블

- 블록은 운영체제와 저장장치 간의 데이터 전송 단위로, 저장장치에서 데이터를 다루는 가장 작은 단위이다. 
- 섹터는 하드디스크에서 데이터가 저장되는 물리적 단위이고, 이를 묶어 하나의 블록을 만든다. 블록 하나에는 주소가 할당된다. 
- 블록 크기는 시스템마다 다르며, 작은 블록 크기는 저장장치를 효율적으로 사용할 수 있지만, 큰 파일의 입출력 속도는 저하될 수 있다. 반면, 큰 블록 크기는 파일 입출력 속도를 높일 수 있다.

### 포맷 과정과 파일 테이블

- 파일 시스템을 포맷하면 각 블록에 번호가 매겨지고, 파일 테이블은 각 파일이 어떤 블록에 저장되어 있는지를 기록한다. 
- 예시 
  - 파일 A는 1번, 3번, 9번 블록에 저장되고, 파일 B는 2번, 4번 블록에 저장될 때,
  - 사용자가 파일 A를 요청하면 해당 블록들을 읽어 사용자에게 반환한다.

---

## 2. 파일 분류와 확장자

### 파일의 분류

- 실행 파일
  - 운영체제가 메모리로 가져와 CPU를 사용해 작업을 수행하는 파일이다. 
  - 사용자의 요청에 의해 프로세스가 된다.
- 데이터 파일
  - 실행 파일이 작업에 필요한 데이터를 담고 있는 파일이다. 
  - 예를 들어 이미지 파일, 음악 파일, 문서 파일 등이 있다. 
  - 데이터 파일은 스스로 프로세스가 될 수 없고, 운영체제가 이를 전송하거나 보관한다.

### 파일 헤더

- 파일에는 고유한 파일 헤더가 있으며, 이 헤더에는 파일 이름, 버전, 크기, 생성 날짜, 접근 권한 등의 정보가 저장된다. 
- 파일은 모두 0과 1로 이루어진 데이터 덩어리로, 헤더를 통해 파일의 성격을 구별할 수 있다.

### 확장자

- 확장자는 파일의 성격을 알 수 있는 중요한 요소이다. 
- 예를 들어 anim.jpg에서 anim은 파일 이름, jpg는 확장자이다. 
- 확장자는 일반적으로 파일 이름 뒤에 붙는다.

#### 확장자 표준과 신설

- 표준 확장자
  - mp3, bmp, jpg, zip 등 전 세계적으로 사용되는 확장자들이 있다. 
- 응용 프로그램에 따른 확장자
  - 특정 응용 프로그램에서 자체적으로 만든 확장자도 있다. 
  - 예를 들어, 아래아한글은 hwp 확장자를, MS-Word는 doc 확장자를 사용한다.
- 압축 파일 확장자
  - rar, zip은 전 세계적으로 사용되며, 알집에서 압축한 파일은 al 확장자를 사용한다.

### 운영체제에 따른 확장자

- 윈도우에서는 실행 파일에 exe나 com 등의 확장자를 사용한다.
- 유닉스는 특별한 확장자가 없다.

---

## 3. 파일 이름과 연결 프로그램

### 파일 이름의 규칙

- 파일 이름과 확장자
  - 대부분의 파일은 '파일 이름.확장자' 형태로 구성된다. 
- 초기 제한
  - 초창기 운영체제에서는 파일 이름은 8자, 확장자는 3자 제한이 있었으며, 여전히 대부분의 확장자는 3자 이하이다. 
  - 그러나 4자나 5자 확장자도 존재한다. 
- 마침표 사용
  - 파일 이름에 여러 개의 마침표(.)를 사용할 수 있으며, 마지막 마침표 뒤의 글자가 확장자로 인식된다. 
  - 예: run,2017.10.avi에서 .avi는 확장자이다. 
- 파일 이름 길이
  - 파일 이름은 경로 이름을 포함하여 최대 255자까지 사용할 수 있다. 
  - 경로 이름은 파일이 위치한 정보이다.

### 사용 가능한 문자

- 윈도우에서는 영문자, 숫자, 밑줄(_), 붙임표(-), 마침표(,) 등을 사용할 수 있다.
- 스페이스바, &, ~ 등의 특수문자도 사용할 수 있다. 
- 단, ?, /, :, *, ?, <, >, | 등의 특수문자는 사용할 수 없다. 
- 윈도우는 대소문자를 구분하지 않는다. 
- 유닉스에서는 파일 이름에 대부분의 특수문자를 사용할 수 없으며, 대소문자를 구분한다.

### 연결 프로그램

- 파일 실행 방식
  - 실행 파일
    - 파일을 더블클릭하면 프로세스가 생성되어 실행된다. 
  - 데이터 파일
    - 더블클릭하면 해당 파일을 열 수 있는 응용 프로그램이 실행된다. 
    - 예: hwp 확장자 파일을 더블클릭하면 아래아한글이 실행된다.
- 데이터 파일과 실행 파일 구분
  - 데이터 파일은 자체적으로 실행되지 않으며, 운영체제가 연결된 응용 프로그램을 실행하여 파일을 처리한다.

### 연결 프로그램 변경

- 연결 프로그램 변경
  - 윈도우에서 데이터 파일에 연결된 응용 프로그램을 바꾸려면 파일을 선택하고 마우스 오른쪽 버튼을 클릭한 후 [속성]에서 변경할 수 있다. 
- 확장자 변경과 내용 변경
  - 확장자를 바꾼다고 해서 파일의 내용이 바뀌는 것은 아니다. 
  - 예를 들어, anim.avi의 확장자를 anim.txt로 변경해도 동영상 파일은 문서 파일로 변하지 않으며, 문서 편집기가 열려도 동영상이 제대로 표시되지 않는다.

### 유닉스의 파일 접근 권한

- 유닉스는 여러 사용자가 동시에 사용할 수 있는 운영체제이므로, 파일에 대한 접근 권한을 설정할 수 있다. 

---

## 4. 파일 속성

### 파일의 속성

- 파일은 여러 가지 속성을 가지며, 이는 파일의 헤더에 기록되고 운영체제에서 관리한다.
- 각 파일 속성은 다음과 같다
  - name, type
    - 파일 이름은 확장자를 포함한 전체 이름을 의미한다. 
    - 파일 종류는 확장자에 따라 구분되며, 예를 들어 실행 파일, 동영상 파일, 사진 파일, 음악 파일 등이 있다.
  - size, time
    - 파일 크기는 파일의 용량을 의미한다. 
    - 파일 시간은 만든 시간, 변경 시간, 마지막으로 파일을 열어본 시간 등을 포함한다.
  - location 
    - 파일의 위치는 파일이 저장된 디렉터리를 의미한다.
    - 같은 이름과 확장자를 가진 두 파일은 서로 다른 디렉터리에 존재할 수 있다.
  - accessibility, owner 
    - 파일 접근 권한은 윈도우에서 "읽기", "쓰기", "숨김" 등의 설정으로 구분된다.
    - 유닉스에서는 소유자, 그룹, 제3자로 나누어 권한을 설정할 수 있다.
    - 윈도우에서는 파일의 소유자 개념이 거의 없지만, 유닉스에서는 소유자가 명확히 구분된다.

### 파일 헤더와 고유 헤더

- 파일 헤더 
  - 파일의 일반적인 속성(이름, 종류, 크기, 시간, 접근 권한 등)을 포함한다. 
  - 파일이 저장장치의 몇 번째 블록에 위치하는지 등의 정보도 담고 있다.
- 고유 헤더 
  - 각 데이터 파일은 응용 프로그램에서 필요한 고유 정보를 포함하는 고유 헤더를 가질 수 있다. 
  - 예를 들어, 사진 파일은 카메라 기종, 셔터 속도, 조리개 값 등을, MP3 파일은 가수명, 앨범명 등을 고유 헤더에 기록한다.
- 고유 헤더의 활용
  - 복구 
    - 고유 헤더는 파일을 복구할 때 중요한 역할을 한다. 
    - 예를 들어, 빠른 포맷이나 휴지통에서 삭제된 파일은 파일 테이블에서만 삭제되고 실제 데이터는 남아 있다. 복구 프로그램은 저장장치에서 고유 헤더를 찾아 파일을 복원한다. 
    - JPG나 MP3와 같은 파일은 전 세계적으로 규격화된 헤더 구조를 가지므로, 헤더만으로도 파일 복구가 가능하다.

---

## 5. 파일 작업의 유형

- 파일 작업은 크게 파일 자체를 변경하는 작업과 파일 내용을 변경하는 작업으로 나눌 수 있다.

### 파일 자체를 변경하는 작업

- 파일 자체를 변경하는 작업에는 다음과 같은 종류가 있다:
  - open, close:
    - 파일을 더블클릭하거나 연결 프로그램을 실행하여 파일을 연다. 
    - 파일을 모두 사용한 후에는 닫는다. 
    - 응용 프로그램이 종료되면 파일도 자동으로 닫힌다. 
  - create:
    - 새 파일을 만드는 작업이다. 
    - 예를 들어, 워드 프로세서에서 새 문서를 작성하고 저장하거나, 
    - 그림판에서 그림을 그리거나 스캔하여 새로운 파일을 생성한다. 
  - remove, copy, rename:
    - 파일 이동은 파일의 위치를 변경하는 것이며, 파일 복사는 동일한 파일을 하나 더 만드는 것이다. 
    - 파일 이름 변경은 파일의 이름을 바꾸는 작업이다. 
    - 파일을 다른 디렉터리로 이동하거나 휴지통으로 보내면 파일이 삭제된다. 
  - list:
    - 디렉터리에 있는 파일들의 이름, 크기, 만든 날짜 등을 나열하는 작업이다. 
  - search:
    - 여러 디렉터리에서 파일을 찾는 작업이다. 
    - 이름순, 크기순, 날짜순 등 다양한 기준으로 검색할 수 있다.
    - 별표(*)와 물음표(?)를 사용하여 검색을 세분화할 수 있다. 
    - 예를 들어, "ab"는 ab로 시작하는 모든 파일을, "ab?"는 ab로 시작하고 한 글자가 추가된 파일을 찾는다.

### 파일 내용을 변경하는 작업

- 파일 내용을 변경하는 작업은 주로 프로세스에서 수행되며, 일반적으로 함수 형태로 이루어진다
  - open() 또는 create() 함수로 파일 이용 권한을 얻고, close() 함수로 작업을 마친다. 
  - 파일을 읽거나 쓰는 작업은 read() 또는 write() 함수로 수행된다. 
  - update(), insert(), delete() 연산은 파일의 내용을 갱신하거나 추가하거나 삭제하는 작업을 할 수 있다.
    - 이는 read() 또는 write()로도 구현이 가능하다.

---

## 6. 디렉터리의 구조

### 디렉터리의 개념

- 디렉터리는 관련된 파일을 하나로 모아놓은 공간으로, 1개 이상의 자식 디렉터리 및 파일을 가질 수 있다. 
- 루트 디렉터리: 최상위 디렉터리. 
- 유닉스에서는 슬래시(/)로 디렉터리 구분, 윈도우에서는 백슬래시(\)를 사용하고 파티션 구분은 알파벳과 콜론(C:)으로 표시.

### 디렉터리 파일

- 디렉터리도 파일로 취급되며, 일반 파일과 다르게 디렉터리 정보(이름, 생성 시간, 접근 권한 등)를 포함한 헤더를 갖는다. 
- 각 디렉터리에는 마침표(.)와 두 마침표(..) 파일이 있어 자신 또는 상위 디렉터리를 가리킨다.

### 경로

- 절대 경로
  - 루트 디렉터리에서 시작하는 경로. 
  - 예: /program/data/exm.c. 
- 상대 경로
  - 현재 디렉터리를 기준으로 한 경로. 
  - 예: data/exm.c 또는 ../user/exm.c. 
- 디렉터리 이동
  - cd 명령어로 절대 경로나 상대 경로를 사용해 디렉터리 간 이동 가능.

### 디렉터리 구조

- 1단계 구조
  - 루트 디렉터리만 존재하고, 그 안에 파일만 존재. 확장성 부족. 
- 다단계 구조
  - 루트 디렉터리를 시작으로 여러 단계를 거쳐 디렉터리가 확장되는 트리 구조. 
  - 확장에 제약이 없으며, 파일과 디렉터리를 동시에 관리할 수 있음. 
- 링크
  - 디렉터리와 디렉터리 간 연결이 가능하며, 윈도우의 '바로가기'나 유닉스의 ln 명령어를 통해 링크를 생성할 수 있다.

###  마운트

- 파티션은 물리적 또는 논리적으로 나뉜 디스크 구분. 
- 윈도우에서는 각 파티션을 드라이브 문자(C:, D:, ...)로 구분하며, 유닉스에서는 하나의 파일 테이블을 사용해 여러 파티션을 통합하여 관리한다. 
- 마운트
  - 여러 파티션을 하나의 파일 시스템으로 통합하는 과정. 
  - 예를 들어, 유닉스에서 /mnt 디렉터리에 다른 파티션을 붙여 하나의 파일 시스템처럼 사용할 수 있다.

---

### 참고자료

[쉽게 배우는 운영체제](https://product.kyobobook.co.kr/detail/S000001743685)