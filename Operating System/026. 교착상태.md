# 교착상태

---

## 1. 개요

### 교착 상태의 정의

- 교착 상태는 2개 이상의 프로세스가 서로의 작업이 끝나기를 기다리며 더 이상 작업을 진행할 수 없는 상태를 말한다. 
- 이는 교통 체증이 심하여 서로 비켜주기를 기다리며 움직이지 못하는 상황에 비유할 수 있다. 
- 예시로, 두 요리사가 믹서와 제빵기를 독점하고 서로 양보하지 않으면 교착 상태에 빠진다. 
- 교착 상태는 아사 현상과 달리 자연적으로 발생하는 문제이며, 운영체제는 이를 해결해야 한다.

### 교착 상태의 발생

- 교착 상태는 시스템 자원, 공유 변수, 응용 프로그램에서 발생할 수 있다.
- 시스템 자원
  - 공유할 수 없는 자원을 사용할 때 교착 상태가 발생한다. 
  - 예를 들어, 프로세스 P1은 프린터를 사용 중이고 CD 레코더를 기다리며, P2는 CD 레코더를 사용 중이고 프린터를 기다릴 때 발생한다.
- 공유 변수
  - 여러 프로세스가 공유 변수에 접근할 때 교착 상태가 발생할 수 있다. 
  - 예시로, 프로세스 P1은 lock1을 true로 설정하고 P2는 lock2를 true로 설정하여 서로 기다리면 교착 상태에 빠진다.
- 응용 프로그램
  - 데이터베이스와 같은 응용 프로그램에서도 교착 상태가 발생할 수 있다. 
  - 여러 프로세스가 데이터베이스에 접근할 때 일관성을 유지하기 위해 잠금을 사용하는데, 이때 교착 상태가 발생할 수 있다.

### 자원 할당 그래프

- 자원 할당 그래프는 프로세스가 어떤 자원을 사용하고 있는지 또는 기다리고 있는지를 방향성 있는 그래프를 통해 나타낸다. 
- 자원 할당 그래프를 통해 교착 상태를 분석할 수 있다. 
- 자원은 사각형, 프로세스는 원으로 표현된다. 
- 자원이 할당된 경우는 자원에서 프로세스로 향하는 화살표로, 프로세스가 자원을 기다리는 경우는 프로세스에서 자원으로 향하는 화살표로 표시된다.

---

## 2. 교착 상태 필요 조건

### 교착 상태 필요 조건

- 교착 상태가 발생하려면 다음 네 가지 조건이 모두 충족해야 한다 
  - 상호 배제: 자원은 배타적으로 사용되며 다른 프로세스와 공유할 수 없다. 
  - 비선점: 자원은 다른 프로세스가 강제로 빼앗을 수 없다. 
  - 점유와 대기: 프로세스는 자원을 점유한 채 다른 자원을 기다리는 상태여야 한다. 
  - 원형 대기: 점유와 대기하는 프로세스들 간의 관계가 원을 이뤄야 한다.

### 식사하는 철학자 문제와 교착 상태 필요 조건

- 식사하는 철학자 문제를 통해 교착 상태 필요 조건을 설명할 수 있다. 
  - 상호 배제: 포크는 배타적인 자원으로, 한 철학자가 사용하면 다른 철학자는 사용할 수 없다. 
  - 비선점: 철학자가 포크를 빼앗을 수 없기 때문에 교착 상태가 발생한다. 
  - 점유와 대기: 철학자는 왼쪽 포크를 점유한 채 오른쪽 포크를 기다리며, 이로 인해 교착 상태가 발생한다. 
  - 원형 대기: 철학자들이 원형으로 앉아 있으며, 서로의 포크를 기다리면 원형 대기가 발생한다. 이로 인해 교착 상태가 지속된다.
- 이 문제를 통해 교착 상태가 어떻게 발생하는지를 이해할 수 있다.

---

### 참고자료

[쉽게 배우는 운영체제](https://product.kyobobook.co.kr/detail/S000001743685)