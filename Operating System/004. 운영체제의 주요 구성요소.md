# 운영체제의 주요 구성요소

---

## 1. 커널(Kernel)

- 운영체제의 핵심 부분으로, 컴퓨터 자원에 대한 접근을 중재하는 역할을 수행함.

### 주요 기능

- 프로세스 관리
- 메모리 관리
- 저장장치 관리
- 입출력 관리
- 프로세스 간 통신
- 시스템 호출

### 커널의 구조

- 단일형 구조: MS-DOS, VMS 등
- 계층형 구조: Windows 등 현대 운영체제
- 마이크로커널 구조: macOS, iOS 등

---

## 2. 인터페이스(Interface)

- 사용자의 명령을 컴퓨터에 전달하고 결과를 사용자에게 알려주는 역할

### 종류

- GUI(그래픽 사용자 인터페이스): 마우스와 그래픽 요소를 활용
- CLI(명령어 기반 인터페이스): 명령어 입력 방식

---

## 3. 시스템 콜(System Call)

- 운영 체제가 제공하는 커널 기능을 사용자 프로그램이 요청할 수 있도록 해주는 인터페이스.
- 사용자 프로그램이 커널 영역의 기능(입출력, 파일 접근 등)을 사용하기 위해 호출하는 함수. 
- 특권 명령은 유저 모드에서 직접 실행할 수 없기 때문에 시스템 콜을 통해 커널 모드에서 실행.

### 시스템 콜의 처리 과정

- 사용자 프로그램이 시스템 콜 요청 (open(), read() 등). 
- 시스템 콜 번호와 핸들러 주소가 있는 시스템 콜 테이블 확인. 
- 해당 핸들러 함수 실행 (커널 모드로 전환됨). 
- 작업 완료 후 인터럽트로 유저 모드 복귀.

### 시스템 콜 매개변수 전달 방식

- CPU 레지스터에 전달 
- 메모리에 저장 후 주소를 레지스터에 전달 
- 스택에 push해서 전달(→ 매개변수 수 제한 없는 2, 3번 방식이 선호됨)

### 시스템 콜 사용 예시: cp in.txt out.txt 실행 시

- open("in.txt") → 파일 존재 확인 
- stat("in.txt") → 속성 확인 
- open("out.txt", O_CREAT) → 출력 파일 생성 
- read(), write() → 파일 복사 
- close() → 파일 닫기

### 시스템 콜이 필요한 이유

- 유저 프로세스는 직접 하드웨어 자원 접근 불가 
- 하드웨어 보호 및 시스템 안정성 확보를 위해 커널 모드에서만 특권 명령 수행 가능 
- 유저 모드에서 특권 명령 시 trap 발생 → 커널이 제어권 획득

### 시스템 콜의 유형

- 프로세스 제어: fork, exec, wait, exit 
- 파일 관리: open, read, write, close, unlink 
- 디바이스 관리: 디바이스 요청/해제, 읽기/쓰기 
- 정보 관리: 시간/속성 조회 및 설정 
- 통신: 메시지 송수신, 연결 설정 등 
- 보안: 접근 권한 확인 및 설정

### 유저 모드와 커널 모드

- 유저 모드: 일반 응용 프로그램 실행 중 제한된 명령만 실행 가능 
- 커널 모드: OS 커널 코드 실행 중 모든 명령 실행 가능 (특권 명령 포함)

### 일반 명령 vs 특권 명령

| 구분       | 설명                                                |
|------------|-----------------------------------------------------|
| 일반 명령  | 산술, 논리 연산 등 누구나 실행 가능                 |
| 특권 명령  | I/O, 디바이스 제어 등 시스템 자원 접근 → 커널 모드 필요 |

- 모드 비트 사용 
  - 0 → 커널 모드 
  - 1 → 유저 모드

---

## 4. 드라이버(Driver)

- 커널과 하드웨어 간의 인터페이스를 담당하는 소프트웨어.

### 역할

- 운영체제가 각 하드웨어를 제어하도록 돕는 역할
- 제조사가 제공하는 디바이스 드라이버 설치 필요

---

### 참고자료

[운영체제의 주요 구성요소](https://cocoon1787.tistory.com/846#google_vignette)

[시스템 콜](https://velog.io/@nnnyeong/OS-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%BD%9C-System-Call)