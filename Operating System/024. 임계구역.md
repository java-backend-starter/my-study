# 임계 구역

---

## 1. 공유 자원 (Shared Resource)  
   
- 여러 프로세스가 공동으로 사용하는 자원(변수, 메모리, 파일 등).
- 접근 순서에 따라 실행 결과가 달라질 수 있으므로 동기화가 필요하다.

### 경쟁 조건 (Race Condition)  

- 둘 이상의 프로세스가 동시에 공유 자원에 접근할 때 발생.
- 접근 순서에 따라 결과가 달라져 예측할 수 없는 상태가 된다.

### 임계 구역 (Critical Section)  

- 공유 자원에 접근하는 중요한 코드 영역.
- 한 프로세스만 접근 가능하며, 다른 프로세스는 대기해야 한다.

### 임계 구역 해결 조건

- 상호 배제(Mutual Exclusion): 하나의 프로세스만 임계 구역에 진입 가능
- 한정 대기(Bounded Waiting): 무한히 기다리는 일이 없어야 함
- 진행의 융통성(Progress): 다른 프로세스가 불필요하게 방해하면 안 됨

--- 

## 2. 임계 구역 해결 방법  

- 가장 단순한 방법은 lock을 사용하는 것이다.
- 임계 구역 진입 전 lock을 걸고, 종료 후 해제하며 동기화를 한다.

### 피터슨 알고리즘  

- 두 프로세스 간 동기화에 사용.
- turn 변수를 통해 양보하며 충돌 방지.
- 세 조건 모두 만족하지만 확장성이 떨어지고 바쁜 대기를 사용.

### 데커 알고리즘  

- 하드웨어 도움 없이 소프트웨어적으로 임계 구역 해결.
- 양보 구조를 통해 접근을 조절.
- 세 조건 만족하지만 복잡하고 확장성이 낮으며 바쁜 대기 존재.

### 뮤텍스 (Mutex)

- Mutual Exclusion의 약자로, 임계 구역 보호를 위한 Lock 기반 동기화 방식
- 한 번에 하나의 스레드만 임계 구역에 진입 가능
- lock()을 통해 임계 구역 진입
- unlock()으로 작업 완료 후 Lock 해제
- Lock이 걸린 상태에선 다른 스레드는 Entry Queue에서 대기
- synchronized는 간단하지만 기아 상태 발생 가능
- ReentrantLock은 명시적 제어, 타임아웃, 조건 변수 등 기능 제공
- 잘못된 unlock() 누락 시 교착 상태 발생 가능


### 세마포어 (Semaphore)  

- P()와 V()를 이용해 자원을 관리하는 방식.
- 자원이 있으면 P()에서 진입, 없으면 대기.
- V()는 자원 해제 및 대기 중인 프로세스를 깨운다.
- 효율적이지만, 잘못된 사용으로 보호 실패 가능.

### 모니터 (Monitor)  

- 공유 자원을 숨기고 인터페이스로만 접근하게 함.
- wait()와 signal()을 통해 동기화.
- 사용자는 내부 구현을 신경쓰지 않아도 되며, 시스템적으로 보호가 강력함.

---

### 참고자료

[공유자원과 임계구역](https://velog.io/@suyeonme/OS-%EA%B3%B5%EC%9C%A0-%EC%9E%90%EC%9B%90%EA%B3%BC-%EC%9E%84%EA%B3%84%EA%B5%AC%EC%97%AD)

[뮤텍스](https://jbground.tistory.com/73)