# 물리 메모리와 가상 메모리

---

## 1. 물리 메모리 (Physical Memory)

### 정의

- 컴퓨터 시스템에 실제로 장착된 RAM (Random Access Memory)
- CPU가 직접 접근 가능한 메모리 공간

### 주요 역할

- 실행 중인 프로그램의 명령어와 데이터를 저장
- CPU가 연산을 수행할 때 필요한 정보를 고속으로 주고받는 공간

### 특징

- 속도 빠름: 메모리 중 가장 빠르게 접근 가능
- 용량 제한: 설치된 RAM의 양이 고정되어 있음
- 모든 실행 중인 프로세스들이 공유해서 사용함

---

## 2. 가상 메모리 (Virtual Memory)

### 정의

- 실제 RAM 용량보다 더 큰 메모리 공간을 제공하기 위한 운영체제의 기능
- 프로세스는 자신만의 연속적인 메모리 공간(가상 주소 공간)을 사용하는 것처럼 보임

### 구현 방식

- 물리 메모리와 디스크 저장 공간 (HDD 또는 SSD 일부)의 조합
- 일부는 RAM에, 일부는 디스크에 저장됨 (페이지 교체 방식 사용)

### 장점

- 큰 프로그램 실행 가능
- 여러 프로그램 동시 실행 가능
- 프로세스 간 메모리 보호 및 격리

### 단점

- 디스크 접근 시 속도 저하 발생 가능 (페이지 폴트)
- 운영체제의 메모리 관리 구조가 복잡해짐

---

## 3. MMU (Memory Management Unit)

### 정의

- 가상 주소를 물리 주소로 변환하는 하드웨어 장치
- CPU와 메모리 사이에서 주소 매핑 수행

### 역할

- 프로그램은 가상 주소 사용, 실제 데이터는 물리 주소에 저장
- MMU는 페이지 테이블 기반으로 주소 변환을 수행함

### 주소 변환 과정

1. CPU가 MMU에 가상 주소를 전달
2. MMU가 페이지 테이블을 참고하여 물리 주소로 변환
3. 해당 물리 주소로 접근

---

## 4. TLB (Translation Lookaside Buffer)

### 정의

- MMU의 주소 변환 결과를 캐시해두는 소형 고속 메모리
- 주소 변환 속도를 높이기 위해 사용됨

### 동작 원리

1. CPU가 가상 주소로 접근
2. MMU는 먼저 TLB 검색
    - TLB hit: 물리 주소 바로 반환
    - TLB miss: 페이지 테이블에서 변환 후 결과를 TLB에 저장

### 구성

- 가상 페이지 번호 (VPN)
- 물리 페이지 번호 (PPN)
- 접근 권한, 유효 비트 등

### 특징

- 크기가 작고 접근 속도가 매우 빠름
- LRU, FIFO 등의 캐시 정책 사용
- TLB hit 비율이 시스템 성능에 큰 영향을 줌

---

## MMU와 TLB의 협력 관계

| 구성 요소 | 역할 |
|-----------|------|
| MMU       | 가상 주소를 물리 주소로 변환 |
| TLB       | 변환 결과를 캐시하여 재사용 |
| 사용 이유 | 변환 속도 향상, 페이지 테이블 접근 최소화 |
| 결과      | 빠르고 효율적인 메모리 접근 가능

---

## 예시 시나리오

1. 프로그램이 0xABC123 주소에 접근 요청
2. CPU가 MMU에 주소를 전달
3. MMU가 먼저 TLB를 확인
    - TLB hit이면 변환된 물리 주소를 즉시 반환
    - TLB miss이면 페이지 테이블에서 변환 후 TLB에 저장
4. 최종적으로 변환된 물리 주소로 메모리 접근


---

### 참고자료

[물리 메모리와 가상 메모리](https://rnrwk0502.tistory.com/21)